{
  "openapi": "3.1.0",
  "info": {
    "title": "Gnosis API",
    "description": "Real-time semantic mind-mapping engine",
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/graph/expand": {
      "post": {
        "tags": [
          "graph"
        ],
        "summary": "Expand Topic",
        "description": "Expand a topic into related concepts.",
        "operationId": "expand_topic_api_v1_graph_expand_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ExpandRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ExpandResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/graph/seed": {
      "post": {
        "tags": [
          "graph"
        ],
        "summary": "Seed Topic",
        "description": "Seed the graph with an initial topic.",
        "operationId": "seed_topic_api_v1_graph_seed_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SeedRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SeedResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/graph/check-similarity": {
      "post": {
        "tags": [
          "graph"
        ],
        "summary": "Check Similarity",
        "description": "Check if a topic is semantically related to existing graph context.",
        "operationId": "check_similarity_api_v1_graph_check_similarity_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimilarityRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimilarityResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Check API health status.",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ExpandRequest": {
        "properties": {
          "topic": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Topic",
            "description": "The concept to expand"
          },
          "source_node_id": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Source Node Id",
            "description": "ID of existing node to connect new concepts to. If not provided, creates edges from topic."
          },
          "context": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "title": "Context",
            "description": "Previous concepts in the exploration path"
          },
          "num_expansions": {
            "type": "integer",
            "maximum": 20.0,
            "minimum": 1.0,
            "title": "Num Expansions",
            "description": "Number of related concepts to generate",
            "default": 5
          }
        },
        "type": "object",
        "required": [
          "topic"
        ],
        "title": "ExpandRequest"
      },
      "ExpandResponse": {
        "properties": {
          "nodes": {
            "items": {
              "$ref": "#/components/schemas/GraphNode"
            },
            "type": "array",
            "title": "Nodes"
          },
          "edges": {
            "items": {
              "$ref": "#/components/schemas/GraphEdge"
            },
            "type": "array",
            "title": "Edges"
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning"
          }
        },
        "type": "object",
        "required": [
          "nodes",
          "edges",
          "reasoning"
        ],
        "title": "ExpandResponse"
      },
      "GraphEdge": {
        "properties": {
          "source": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Source"
          },
          "target": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Target"
          },
          "label": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 100
              },
              {
                "type": "null"
              }
            ],
            "title": "Label",
            "description": "Relationship type"
          }
        },
        "type": "object",
        "required": [
          "source",
          "target"
        ],
        "title": "GraphEdge"
      },
      "GraphNode": {
        "properties": {
          "id": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Id",
            "description": "Unique kebab-case identifier"
          },
          "label": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Label",
            "description": "Human-readable label"
          },
          "type": {
            "type": "string",
            "enum": [
              "root",
              "generated"
            ],
            "title": "Type"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "Why this concept relates"
          }
        },
        "type": "object",
        "required": [
          "id",
          "label",
          "type"
        ],
        "title": "GraphNode"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthResponse": {
        "properties": {
          "status": {
            "type": "string",
            "enum": [
              "healthy",
              "degraded",
              "unhealthy"
            ],
            "title": "Status"
          },
          "version": {
            "type": "string",
            "title": "Version",
            "default": "1.0.0"
          },
          "services": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Services"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "HealthResponse"
      },
      "SeedRequest": {
        "properties": {
          "topic": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Topic",
            "description": "The seed topic to start with"
          }
        },
        "type": "object",
        "required": [
          "topic"
        ],
        "title": "SeedRequest"
      },
      "SeedResponse": {
        "properties": {
          "node": {
            "$ref": "#/components/schemas/GraphNode"
          },
          "reasoning": {
            "type": "string",
            "title": "Reasoning"
          }
        },
        "type": "object",
        "required": [
          "node",
          "reasoning"
        ],
        "title": "SeedResponse"
      },
      "SimilarityRequest": {
        "properties": {
          "topic": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Topic",
            "description": "The topic to check similarity for"
          },
          "context": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "maxItems": 50,
            "minItems": 1,
            "title": "Context",
            "description": "Existing node labels to compare against"
          },
          "threshold": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Threshold",
            "description": "Similarity threshold (0-1). Below this = unrelated",
            "default": 0.3
          }
        },
        "type": "object",
        "required": [
          "topic",
          "context"
        ],
        "title": "SimilarityRequest"
      },
      "SimilarityResponse": {
        "properties": {
          "is_related": {
            "type": "boolean",
            "title": "Is Related",
            "description": "Whether the topic is semantically related to context"
          },
          "similarity_score": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Similarity Score",
            "description": "Highest similarity score found"
          },
          "closest_match": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Closest Match",
            "description": "The context item most similar to the topic"
          },
          "suggested_action": {
            "type": "string",
            "enum": [
              "expand",
              "new_root"
            ],
            "title": "Suggested Action",
            "description": "Recommended action: expand existing graph or create new root"
          }
        },
        "type": "object",
        "required": [
          "is_related",
          "similarity_score",
          "suggested_action"
        ],
        "title": "SimilarityResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      }
    }
  }
}